jobs = AnalysisJob.objects.all()

for job in jobs:
    if job.status == 'ERROR':
        job.status = 'QUEUED'
        job.save()
        print(f"updated {job}")

jobs = AnalysisJob.objects.all()
submitted = 0
error = 0
qu = 0
for job in jobs:
    if job.status == 'SUBMITTED':
        submitted += 1
    elif job.status == 'ERROR':
        error += 1
    elif job.status == 'QUEUED':
        qu +=1
    print(job, job.status)

print(f"There are {submitted} submitted jobs, {qu} queued jobs and {error} error jobs")